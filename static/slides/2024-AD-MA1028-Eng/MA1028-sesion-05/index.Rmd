---
title: "Composition and Chain Rule"
subtitle: "Session 05"  
author: 
  - "Alejandro Ucan"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
      countIncrementalSlides: true
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = FALSE,
  message = FALSE, 
  warning = FALSE,
  hiline = TRUE
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#000080",
  secondary_color = "#f2f3f4",
  inverse_header_color = "#00147e"
)
```

```{r xaringan-editable, echo=FALSE}
xaringanExtra::use_editable(expires = 1)
xaringanExtra::use_scribble()
```

```{r xaringan-logo, echo=FALSE}
xaringanExtra::use_logo(
  image_url = "https://github.com/alxcn/TecLogoEIC/blob/9562a53875418e749a296c85808a19c85fc4be74/IngenieriaCiencias_Horizontal_RGB.png",
  position = xaringanExtra::css_position(top = "2em", right = "2em")
)
```
# Goals

* Introduce what is a composition of functions. <br/><br/>
* Introduce the Inverse Function and its properties. <br/><br/>
* Introduce the Chain Rule. <br/><br/>

---
# Motivation

Sometimes we need to combine functions to model a real-world problem. For example, we can model the temperature of a room as a function of the number of people in the room, but the number of people in the room can be modeled as a function of time. Therefore there is a model that relates the temperature of the room with time passing through the number of people in the room.

---
# Composition of Functions

> **Definition:** Let $f: A \to B$ and $g: B \to C$ be functions. The composition of $f$ and $g$ is the function defined by $(f \circ g)(x) = f(g(x))$.

--
#### Remarks

1. The domain of $f \circ g$ is the set of all $x$ in $A$ such that $g(x)$ is in $B$.
2. The range of $f \circ g$ is the set of all $f(y)$ such that $y$ is in the range of $g$.
3. The composition of functions is associative, that is, $(f \circ g) \circ h = f \circ (g \circ h)$.
4. We can think of the composition of functions as a chain of transformations, or variables that depend on other variables.

---
#### Examples:

Describe the domain and range of the following compositions of functions, also the expresion and the value of the composition at a given point.

1. Let $f(x) = x^2$ and $g(x) = \sqrt{x+2},$ with $x_0= -2.$
2. Let $f(x) = \sin(x)$ and $g(x) = \cos(x)$ with $x_0 = \pi/4.$
3. Let $f(x) = x^2+1$ and $g(x)=1/x,$ with $x_0 = 2.$

---
# Inverse Function

> **Definition:** Let $f: A \to B$ be a function. The inverse function of $f$ is the function $f^{-1}: B \to A$ such that $f^{-1}(f(x)) = x$ for all $x$ in $A$ and $f(f^{-1}(y)) = y$ for all $y$ in $B$.

--
#### Remarks

1. Not all functions have an inverse, just those that are one-to-one and onto.
2. The graph of a function and its inverse are symmetric with respect to the line $y=x.$
3. The inverse of a function is unique.

---
#### Examples:

1. Let $f(x) = 2x+1,$ find the inverse of $f.$ <br/><br/>

--
Let see that $f$ is one-to-one and onto, then we can find the inverse of $f.$ <br/> Assume that $x_1$ and $x_2$ such that $f(x_1)=f(x_2)$ this means $$2x_1+1 = 2x_2+1 \Rightarrow 2x_1 = 2x_2 \Rightarrow x_1 = x_2.$$ <br/> Therefore, $f$ is one-to-one. <br/> Now, let $y$ be any number in $\mathbb{R},$ then we can find $x$ such that $f(x) = y,$ that is $2x+1 = y \Rightarrow x = \frac{y-1}{2}.$ <br/> Therefore, $f$ is onto. <br/> Finally, the inverse of $f$ is $f^{-1}(x) = \frac{x-1}{2}.$

---
2. Let $f(x) = x^3,$ find the inverse of $f.$ <br/><br/>

--
Let see that $f$ is one-to-one and onto, then we can find the inverse of $f.$ <br/> Assume that $x_1$ and $x_2$ such that $f(x_1)=f(x_2)$ this means $$x_1^3 = x_2^3 \Rightarrow x_1 = x_2.$$ <br/> Therefore, $f$ is one-to-one. <br/> Now, let $y$ be any number in $\mathbb{R},$ then we can find $x$ such that $f(x) = y,$ that is $x^3 = y \Rightarrow x = \sqrt[3]{y}.$ <br/> Therefore, $f$ is onto. <br/> Finally, the inverse of $f$ is $f^{-1}(x) = \sqrt[3]{x}.$

---
3. Let $f(x) = x^2,$ find the inverse of $f.$ <br/><br/>

--
Let see that $f$ is one-to-one and onto, then we can find the inverse of $f.$ <br/> Assume that $x_1$ and $x_2$ such that $f(x_1)=f(x_2)$ this means $$x_1^2 = x_2^2 \Rightarrow x_1 =\pm x_2.$$ <br/> Therefore, $f$ is not one-to-one. Therefore it does not have an inverse over all real numbers. What we can do to find the inverse of $f$ is to restrict the domain of $f$ to the non-negative real numbers.

---
# Chain Rule

> **Theorem:** Let $f: A \to B$ and $g: B \to C$ be functions such that $f$ is differentiable at $x$ and $g$ is differentiable at $f(x).$ Then the composition $g \circ f$ is differentiable at $x$ and its derivative is given by $$(g \circ f)'(x) = g'(f(x))f'(x).$$ 

--
#### Sketch:

Lets use the limit definition of the derivative to proof the chain rule. <br/><br/> 
Let $h(x) = g(f(x)),$ then we have that $h'(x) = \lim_{h \to 0} \frac{h(x+h) - h(x)}{h} = \lim_{h \to 0} \frac{g(f(x+h)) - g(f(x))}{h}.$ <br/><br/> We can multiply by $\frac{f(x+h) - f(x)}{f(x+h) - f(x)}$ to get $h'(x) = \lim_{h \to 0} \frac{g(f(x+h)) - g(f(x))}{f(x+h) - f(x)} \cdot \frac{f(x+h) - f(x)}{h}.$ <br/><br/> Now we can use the definition of the derivative of $f$ and $g$ to get $h'(x) = g'(f(x))f'(x).$

---
#### Examples:

Given the following functions, find the derivative of the composition of functions at a given point.

1. Let $f(x) = x^2$ and $g(x) = \sqrt{x+2},$ with $x_0= -2.$
2. Let $f(x) = \sin(x)$ and $g(x) = \cos(x)$ with $x_0 = \pi/4.$
3. Let $f(x) = x^2+1$ and $g(x)=1/x,$ with $x_0 = 2.$
4. Let $f(x) = e^x$ and $g(x) = \ln(x),$ with $x_0 = 1.$

---
#### Examples

Find the derivative of the following functions:

1. $f(x) = \sin((3x+1)^2).$
2. $f(x) = 1/\ln(x^2+1).$
3. $f(x) = e^{\cos(3x^2+3x+1)}.$

